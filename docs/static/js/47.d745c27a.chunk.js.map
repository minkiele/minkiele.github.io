{"version":3,"file":"static/js/47.d745c27a.chunk.js","mappings":"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","sources":["lib/generateClassName.ts","webpack://minkiele.github.io.x/./src/apps/SudokuUI/SudokuUI.module.scss?8ff3","apps/SudokuUI/SudokuUI.tsx","../node_modules/classnames/index.js"],"sourcesContent":["import generateClassName from \"classnames\";\nexport { generateClassName };\nexport default generateClassName;\n","// extracted by mini-css-extract-plugin\nexport default {\"cell\":\"SudokuUI_cell__pJtvB\",\"input\":\"SudokuUI_input__Ec29A\",\"table\":\"SudokuUI_table__A2w60\"};","import dayjs, { Dayjs } from \"dayjs\";\nimport { assocPath, repeat, times } from \"ramda\";\nimport { ChangeEvent, KeyboardEvent, useEffect, useReducer, useRef, useState } from \"react\";\nimport generateClassName from \"../../lib/generateClassName\";\nimport styles from \"./SudokuUI.module.scss\";\n\ninterface MatrixReducerAction {\n  row: number;\n  col: number;\n  value: string;\n}\n\ninterface ElapsedReducerState {\n  start: Dayjs | null;\n  current: Dayjs | null;\n  elapsed: number;\n}\n\ninterface ElapsedReducerAction {\n  type: \"start\" | \"stop\" | \"update\";\n}\n\ninterface CaptionProps {\n  started: boolean;\n}\n\nfunction Caption({ started = false }: CaptionProps) {\n  const [timeStatus, setTimeStatus] = useReducer(\n    (state: ElapsedReducerState, action: ElapsedReducerAction) => {\n      switch (action.type) {\n        case \"start\": {\n          if (state.start == null) {\n            const now = dayjs();\n            return { start: now, current: now, elapsed: 0 };\n          } else {\n            return state;\n          }\n        }\n        case \"stop\": {\n          return { start: null, current: null, elapsed: 0 };\n        }\n        default:\n          const now = dayjs();\n          return {\n            ...state,\n            current: now,\n            elapsed: state.current?.diff(state.start, \"s\") ?? 0,\n          };\n      }\n    },\n    {\n      start: null,\n      current: null,\n      elapsed: 0,\n    }\n  );\n\n  const timerId = useRef<ReturnType<typeof setInterval>>();\n\n  useEffect(() => {\n    if (started === true) {\n      setTimeStatus({\n        type: \"start\",\n      });\n    }\n  }, [started]);\n\n  useEffect(() => {\n    if (timeStatus.start != null) {\n      timerId.current = setInterval(() => {\n        setTimeStatus({\n          type: \"update\",\n        });\n      }, 1000);\n    } else if (timerId.current != null) {\n      clearTimeout(timerId.current);\n    }\n  }, [started, timeStatus.start]);\n\n  return <>{timeStatus.elapsed}</>;\n}\n\n\nfunction SudokuUI() {\n  const sanitizeValue = (input: string): string => {\n    const inputNumber = Number(input);\n    return isNaN(inputNumber) || inputNumber < 1 || inputNumber > 9\n      ? \"\"\n      : `${inputNumber}`;\n  };\n\n  const [matrix, setValue] = useReducer(\n    (state: Array<Array<string>>, { row, col, value }: MatrixReducerAction) =>\n      assocPath([row, col], sanitizeValue(value), state),\n    repeat(repeat(\"\", 9), 9)\n  );\n\n  const [started, setStarted] = useState<boolean>(false);\n\n  const inputRefs = useRef<Array<Array<HTMLInputElement | null>>>(repeat(repeat(null, 9), 9));\n\n  const handleChange = (row: number, col: number) => (evt: ChangeEvent) => {\n    setValue({ row, col, value: (evt.target as HTMLInputElement).value });\n    setStarted(true);\n  };\n\n  const setRefFactory = (row: number, col: number) => (ref: HTMLInputElement) => {\n    inputRefs.current[row][col] = ref;\n  };\n\n  const handleMoveFactory = (row: number, col: number) => (evt: KeyboardEvent<HTMLInputElement>) => {\n    // if((evt.target as HTMLInputElement).value.length === 0)\n    switch(evt.key) {\n      case 'Up':\n        if(row > 0) {\n          inputRefs.current[row - 1][col]?.focus();\n        }\n        break;\n      case 'Down':\n        if(row < 8) {\n          inputRefs.current[row + 1][col]?.focus();\n        }\n        break;\n      case 'Left':\n        if(col > 0) {\n          inputRefs.current[row][col - 1]?.focus();\n        }\n        break;\n      case 'Right':\n        if(col < 8) {\n          inputRefs.current[row][col + 1]?.focus();\n        }\n        break;\n    }\n  };\n\n  return (\n    <table className={styles.table}>\n      <caption>\n        <Caption started={started} />\n      </caption>\n      <tbody>\n        {times(\n          (row) => (\n            <tr\n              key={`row-${row}`}\n            >\n              {times(\n                (col) => (\n                  <td\n                    key={`col-${row}-${col}`}\n                    className={generateClassName({\n                      [styles.cell]: true,\n                    })}\n                  >\n                    <input\n                      id={`input-${row}-${col}`}\n                      value={matrix[row][col]}\n                      onChange={handleChange(row, col)}\n                      className={styles.input}\n                      ref={setRefFactory(row, col)}\n                      onKeyUp={handleMoveFactory(row, col)}\n                    />\n                  </td>\n                ),\n                9\n              )}\n            </tr>\n          ),\n          9\n        )}\n      </tbody>\n    </table>\n  );\n}\n\nexport default SudokuUI;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["Caption","started","useReducer","state","action","type","start","now","dayjs","current","elapsed","diff","timeStatus","setTimeStatus","timerId","useRef","useEffect","setInterval","clearTimeout","row","col","value","assocPath","input","inputNumber","Number","isNaN","sanitizeValue","repeat","matrix","setValue","useState","setStarted","inputRefs","handleChange","evt","target","setRefFactory","ref","handleMoveFactory","key","focus","className","styles","times","generateClassName","id","onChange","onKeyUp","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","call","join","module","exports","default"],"sourceRoot":""}