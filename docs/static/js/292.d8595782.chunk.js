"use strict";(self.webpackChunkminkiele_github_io=self.webpackChunkminkiele_github_io||[]).push([[292],{5292:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(7363),o=t(6417);function s(e){const n=Object.assign({p:"p",a:"a",strong:"strong"},e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["This is a WebGL scene I made by combining some examples I found in\n",(0,o.jsx)(n.a,{href:"https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene",children:"ThreeJS docs"}),"\nand in ",(0,o.jsx)(n.a,{href:"https://github.com/mrdoob/three.js/tree/r148",children:"ThreeJS sources"}),".\nThen I tried to apply ",(0,o.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system",children:"Spherical Coordinate System"}),"\nto move the camera applied to the scene. I added some solids to not lose the orientation.\n",(0,o.jsx)(n.strong,{children:"Red"})," represents ",(0,o.jsx)(n.strong,{children:"X"})," axis, ",(0,o.jsx)(n.strong,{children:"Green"})," the ",(0,o.jsx)(n.strong,{children:"Y"})," axis and ",(0,o.jsx)(n.strong,{children:"Blue"})," the ",(0,o.jsx)(n.strong,{children:"Z"})," axis. Keeping up with\nthe old OpenGL tradition sometimes I had to flip signs to make things go my way."]}),"\n",(0,o.jsx)(n.p,{children:"To navigate the example you can click and drag the scene\nto rotate it and scroll the mousewheel to zoom in and out."}),"\n",(0,o.jsx)(n.p,{children:"After expanding the example I phased out the initial examples I built."})]})}var a=function(e={}){const{wrapper:n}=e.components||{};return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(s,e)})):s(e)},r=t(5671),u=t(3144),h=t(136),l=t(7277),c=t(8634),d=function(){function e(n){(0,r.Z)(this,e),this.container=n,this.scene=new c.xsS,this.renderer=new c.CP7,this.camera=void 0,this.isRunningAnimation=!1,this.camera=this.createCamera(),this.update()}return(0,u.Z)(e,[{key:"setupCanvas",value:function(e){}},{key:"teardownCanvas",value:function(e){}},{key:"mount",value:function(){this.setupScene(this.scene,this.camera),this.setupCanvas(this.renderer.domElement),this.container.appendChild(this.renderer.domElement)}},{key:"unmount",value:function(){this.stop(),this.teardownCanvas(this.renderer.domElement),this.container.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.isRunningAnimation||(this.update(),this.isRunningAnimation=!0,this.runAnimation(0))}},{key:"stop",value:function(){this.isRunningAnimation=!1}},{key:"update",value:function(){this.updateRenderer(),this.updateCamera(this.camera)}},{key:"getContainerSize",value:function(){var e=this.container.getBoundingClientRect();return{width:e.width,height:e.height}}},{key:"updateRenderer",value:function(){var e=this.getContainerSize(),n=e.width,t=e.height;this.renderer.setSize(n,t)}},{key:"applyAnimationAndRenderFrame",value:function(e){this.animate(e,{scene:this.scene,camera:this.camera,canvas:this.renderer.domElement}),this.renderer.render(this.scene,this.camera)}},{key:"runAnimation",value:function(e){this.isRunningAnimation&&(window.requestAnimationFrame(this.runAnimation.bind(this)),this.applyAnimationAndRenderFrame(e))}},{key:"renderFrame",value:function(){this.update(),this.applyAnimationAndRenderFrame(0)}},{key:"addContainerListener",value:function(){var e;(e=this.container).addEventListener.apply(e,arguments)}},{key:"removeContainerListener",value:function(){var e;(e=this.container).removeEventListener.apply(e,arguments)}}],[{key:"degToRad",value:function(e){return e*Math.PI/180}},{key:"radToDeg",value:function(e){return 180*e/Math.PI}},{key:"getNormalizedSphericAngle",value:function(n){return(n%e.P2+e.P2)%e.P2}},{key:"limitNumericValue",value:function(e,n,t){return Math.min(n,Math.max(e,t))}}]),e}();d.P2=2*Math.PI;var m=function(e){(0,h.Z)(t,e);var n=(0,l.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,u.Z)(t,[{key:"updateCamera",value:function(e){var n=this.getContainerSize(),t=n.width,i=n.height;e.aspect=t/i,e.updateProjectionMatrix()}}]),t}(d),v=function(){function e(n,t){(0,r.Z)(this,e),this.element=n,this.dragCallback=t,this.isMouseDown=!1,this.previousMovement=void 0,this.onMouseDown=this.onMouseDownImpl.bind(this),this.onMouseUp=this.onMouseUpImpl.bind(this),this.onMouseMove=this.onMouseMoveImpl.bind(this),this.onMouseWheel=this.onMouseWheelImpl.bind(this),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseup",this.onMouseUp),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseleave",this.onMouseUp),this.element.addEventListener("wheel",this.onMouseWheel)}return(0,u.Z)(e,[{key:"onMouseDownImpl",value:function(e){e.preventDefault(),this.previousMovement=void 0,this.isMouseDown=!0}},{key:"onMouseUpImpl",value:function(e){e.preventDefault(),this.isMouseDown=!1,this.previousMovement=void 0}},{key:"onMouseMoveImpl",value:function(e){e.preventDefault(),this.isMouseDown&&(null!=this.previousMovement&&this.dragCallback({x:e.clientX-this.previousMovement.x,y:this.previousMovement.y-e.clientY,z:0}),this.previousMovement={x:e.clientX,y:e.clientY,z:0})}},{key:"onMouseWheelImpl",value:function(e){var n,t,i,o;e.preventDefault(),null!=this.previousMovement&&this.dragCallback({x:this.previousMovement.x,y:this.previousMovement.y,z:e.deltaY}),this.previousMovement={x:null!==(n=null===(t=this.previousMovement)||void 0===t?void 0:t.x)&&void 0!==n?n:0,y:null!==(i=null===(o=this.previousMovement)||void 0===o?void 0:o.y)&&void 0!==i?i:0,z:e.deltaY}}},{key:"teardown",value:function(){this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseup",this.onMouseUp),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mouseleave",this.onMouseUp),this.element.removeEventListener("wheel",this.onMouseWheel)}}]),e}(),p=d,f=function(e){(0,h.Z)(t,e);var n=(0,l.Z)(t);function t(){var e;(0,r.Z)(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=n.call.apply(n,[this].concat(o))).cube=void 0,e.mouseDragger=void 0,e.cameraRho=4,e.cameraPhi=Math.PI/4,e.cameraTheta=e.cameraPhi+0,e}return(0,u.Z)(t,[{key:"createCamera",value:function(){return new c.cPb(75,1,.1,1e3)}},{key:"setupScene",value:function(e,n){n.position.setFromSphericalCoords(this.cameraRho,this.cameraPhi,this.cameraTheta),n.lookAt(0,0,0);var t=new c.DvJ(1,1,1),i=new c.xoR({color:16038656});this.cube=new c.Kj0(t,i),e.add(this.cube);var o=new c.Kj0(new c.b_z(.1,.2),new c.xoR({color:16711680})),s=new c.Kj0(new c.b_z(.1,.2),new c.xoR({color:65280})),a=new c.Kj0(new c.b_z(.1,.2),new c.xoR({color:255})),r=new c.Kj0(new c.xo$(.1),new c.xoR({color:16777215}));o.position.set(1,0,0),o.rotation.z=-Math.PI/2,s.position.set(0,1,0),a.position.set(0,0,1),a.rotation.x=Math.PI/2,e.add(o),e.add(s),e.add(a),e.add(r);var u=new c.vmT(16777147,526368,1);e.add(u)}},{key:"animate",value:function(e,n){var t=n.camera;null!=this.cube&&(this.cube.rotation.set(e/2e3%p.P2,e/1e3%p.P2,e/3e3%p.P2),this.cube.position.set(4*this.getAxisRocker(4e3,e)-2,2*this.getAxisRocker(2e3,e)-1,3*this.getAxisRocker(6e3,e)-1.5)),t.position.setFromSphericalCoords(this.cameraRho,this.cameraPhi,this.cameraTheta),t.lookAt(0,0,0)}},{key:"getAxisRocker",value:function(e,n){var t=2*e,i=Math.sign(n%t/e-1)>=0,o=n%e/e;return this.easeInOutSine(i?o:1-o)}},{key:"easeInOutSine",value:function(e){return-(Math.cos(Math.PI*e)-1)/2}},{key:"setupCanvas",value:function(e){this.mouseDragger=new v(e,this.dragCameraAround.bind(this))}},{key:"teardownCanvas",value:function(){var e;null===(e=this.mouseDragger)||void 0===e||e.teardown(),this.mouseDragger=void 0}},{key:"dragCameraAround",value:function(e){var n=e.x,t=e.y,i=e.z;this.cameraTheta=p.getNormalizedSphericAngle(this.cameraTheta-n/100),this.cameraPhi=p.limitNumericValue(0,Math.PI,this.cameraPhi+t/100),this.cameraRho=p.limitNumericValue(2,7,this.cameraRho+i/100)}}]),t}(m),g=t(936),w=t.n(g),M="LzZek",y=function(e){var n=e.onInit,t=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=t.current;if(null!=e){var i=n(e),o=w()(i.update.bind(i),50);return window.addEventListener("resize",o),i.mount(),i.start(),function(){window.removeEventListener("resize",o),o.cancel(),i.stop(),i.unmount()}}}),[n]),(0,o.jsx)("div",{className:M,ref:t})},k=function(){var e=(0,i.useCallback)((function(e){return new f(e)}),[]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(a,{}),(0,o.jsx)(y,{onInit:e})]})}}}]);