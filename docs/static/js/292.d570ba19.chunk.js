"use strict";(self.webpackChunkminkiele_github_io=self.webpackChunkminkiele_github_io||[]).push([[292],{5292:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var i=n(7363),s=n(6417);function a(e){const t=Object.assign({p:"p",a:"a",strong:"strong"},e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["This is a WebGL scene I made by combining some examples I found in\n",(0,s.jsx)(t.a,{href:"https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene",children:"ThreeJS docs"}),"\nand in ",(0,s.jsx)(t.a,{href:"https://github.com/mrdoob/three.js/tree/r148",children:"ThreeJS sources"}),".\nThen I tried to apply ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Spherical_coordinate_system",children:"Spherical Coordinate System"}),"\nto move the camera applied to the scene. I added some solids to not lose the orientation.\n",(0,s.jsx)(t.strong,{children:"Red"})," represents ",(0,s.jsx)(t.strong,{children:"X"})," axis, ",(0,s.jsx)(t.strong,{children:"Green"})," the ",(0,s.jsx)(t.strong,{children:"Y"})," axis and ",(0,s.jsx)(t.strong,{children:"Blue"})," the ",(0,s.jsx)(t.strong,{children:"Z"})," axis. Keeping up with\nthe old OpenGL tradition sometimes I had to flip signs to make things go my way."]}),"\n",(0,s.jsx)(t.p,{children:"To navigate the example you can click and drag the scene to rotate it\nand scroll the mousewheel to zoom in and out."}),"\n",(0,s.jsxs)(t.p,{children:["To navigate the example with keyboard you can use ",(0,s.jsx)(t.strong,{children:"WSAD"})," to move around the scene\nand ",(0,s.jsx)(t.strong,{children:"+ and -"})," to zoom in and out (keep the key pressed for a smoother experience)."]}),"\n",(0,s.jsx)(t.p,{children:"After expanding the example I phased out the initial examples I built."})]})}var o=function(e={}){const{wrapper:t}=e.components||{};return t?(0,s.jsx)(t,Object.assign({},e,{children:(0,s.jsx)(a,e)})):a(e)},r=n(5671),h=n(3144),u=n(136),l=n(7277),m=n(8634),c=function(){function e(t){(0,r.Z)(this,e),this.container=t,this.scene=new m.xsS,this.renderer=new m.CP7,this.camera=void 0,this.isRunningAnimation=!1,this.camera=this.createCamera(),this.update()}return(0,h.Z)(e,[{key:"setupCanvas",value:function(e){}},{key:"teardownCanvas",value:function(e){}},{key:"mount",value:function(){this.setupScene(this.scene,this.camera),this.setupCanvas(this.renderer.domElement),this.container.appendChild(this.renderer.domElement)}},{key:"unmount",value:function(){this.stop(),this.teardownCanvas(this.renderer.domElement),this.container.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.isRunningAnimation||(this.update(),this.isRunningAnimation=!0,this.runAnimation(0))}},{key:"stop",value:function(){this.isRunningAnimation=!1}},{key:"update",value:function(){this.updateRenderer(),this.updateCamera(this.camera)}},{key:"getContainerSize",value:function(){var e=this.container.getBoundingClientRect();return{width:e.width,height:e.height}}},{key:"updateRenderer",value:function(){var e=this.getContainerSize(),t=e.width,n=e.height;this.renderer.setSize(t,n)}},{key:"applyAnimationAndRenderFrame",value:function(e){this.animate(e,{scene:this.scene,camera:this.camera,canvas:this.renderer.domElement}),this.renderer.render(this.scene,this.camera)}},{key:"runAnimation",value:function(e){this.isRunningAnimation&&(window.requestAnimationFrame(this.runAnimation.bind(this)),this.applyAnimationAndRenderFrame(e))}},{key:"renderFrame",value:function(){this.update(),this.applyAnimationAndRenderFrame(0)}},{key:"addContainerListener",value:function(){var e;(e=this.container).addEventListener.apply(e,arguments)}},{key:"removeContainerListener",value:function(){var e;(e=this.container).removeEventListener.apply(e,arguments)}}],[{key:"degToRad",value:function(e){return e*Math.PI/180}},{key:"radToDeg",value:function(e){return 180*e/Math.PI}},{key:"getNormalizedSphericAngle",value:function(t){return(t%e.P2+e.P2)%e.P2}},{key:"limitNumericValue",value:function(e,t,n){return Math.min(t,Math.max(e,n))}}]),e}();c.P2=2*Math.PI;var d=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"updateCamera",value:function(e){var t=this.getContainerSize(),n=t.width,i=t.height;e.aspect=n/i,e.updateProjectionMatrix()}}]),n}(c),v=function(){function e(t,n){(0,r.Z)(this,e),this.element=t,this.dragCallback=n,this.isMouseDown=!1,this.previousMovement=void 0,this.onMouseDown=this.onMouseDownImpl.bind(this),this.onMouseUp=this.onMouseUpImpl.bind(this),this.onMouseMove=this.onMouseMoveImpl.bind(this),this.onMouseWheel=this.onMouseWheelImpl.bind(this),this.element.addEventListener("mousedown",this.onMouseDown),this.element.addEventListener("mouseup",this.onMouseUp),this.element.addEventListener("mousemove",this.onMouseMove),this.element.addEventListener("mouseleave",this.onMouseUp),this.element.addEventListener("wheel",this.onMouseWheel)}return(0,h.Z)(e,[{key:"onMouseDownImpl",value:function(e){e.preventDefault(),this.previousMovement=void 0,this.isMouseDown=!0}},{key:"onMouseUpImpl",value:function(e){e.preventDefault(),this.isMouseDown=!1,this.previousMovement=void 0}},{key:"onMouseMoveImpl",value:function(e){e.preventDefault(),this.isMouseDown&&(null!=this.previousMovement&&this.dragCallback({x:e.clientX-this.previousMovement.x,y:this.previousMovement.y-e.clientY,z:0}),this.previousMovement={x:e.clientX,y:e.clientY,z:0})}},{key:"onMouseWheelImpl",value:function(e){var t,n,i,s;e.preventDefault(),null!=this.previousMovement&&this.dragCallback({x:this.previousMovement.x,y:this.previousMovement.y,z:e.deltaY}),this.previousMovement={x:null!==(t=null===(n=this.previousMovement)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(i=null===(s=this.previousMovement)||void 0===s?void 0:s.y)&&void 0!==i?i:0,z:e.deltaY}}},{key:"teardown",value:function(){this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("mouseup",this.onMouseUp),this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mouseleave",this.onMouseUp),this.element.removeEventListener("wheel",this.onMouseWheel)}}]),e}(),p=function(){function e(t,n){(0,r.Z)(this,e),this.element=t,this.callback=n,this.key=void 0,this.timeStamp=void 0,this.onKeyDown=this.onKeyDownImpl.bind(this),this.onKeyUp=this.onKeyUpImpl.bind(this),this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("keyup",this.onKeyUp)}return(0,h.Z)(e,[{key:"onKeyDownImpl",value:function(e){this.key!==e.key&&(this.timeStamp=void 0),this.callback(e.key,null==this.timeStamp?0:e.timeStamp-this.timeStamp,(function(){return e.preventDefault()})),e.defaultPrevented&&(this.key=e.key,this.timeStamp=e.timeStamp)}},{key:"onKeyUpImpl",value:function(){this.key=void 0,this.timeStamp=void 0}},{key:"teardown",value:function(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("keyup",this.onKeyUp)}}]),e}(),y=c,f=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).cube=void 0,e.mouseDragger=void 0,e.keyboardPresser=void 0,e.cameraRho=4,e.cameraPhi=Math.PI/4,e.cameraTheta=e.cameraPhi+0,e}return(0,h.Z)(n,[{key:"createCamera",value:function(){return new m.cPb(75,1,.1,1e3)}},{key:"setupScene",value:function(e,t){t.position.setFromSphericalCoords(this.cameraRho,this.cameraPhi,this.cameraTheta),t.lookAt(0,0,0);var n=new m.DvJ(1,1,1),i=new m.xoR({color:16038656});this.cube=new m.Kj0(n,i),e.add(this.cube);var s=new m.Kj0(new m.b_z(.1,.2),new m.xoR({color:16711680})),a=new m.Kj0(new m.b_z(.1,.2),new m.xoR({color:65280})),o=new m.Kj0(new m.b_z(.1,.2),new m.xoR({color:255})),r=new m.Kj0(new m.xo$(.1),new m.xoR({color:16777215}));s.position.set(1,0,0),s.rotation.z=-Math.PI/2,a.position.set(0,1,0),o.position.set(0,0,1),o.rotation.x=Math.PI/2,e.add(s),e.add(a),e.add(o),e.add(r);var h=new m.vmT(16777147,526368,1);e.add(h)}},{key:"animate",value:function(e,t){var n=t.camera;null!=this.cube&&(this.cube.rotation.set(e/2e3%y.P2,e/1e3%y.P2,e/3e3%y.P2),this.cube.position.set(4*this.getAxisRocker(4e3,e)-2,2*this.getAxisRocker(2e3,e)-1,3*this.getAxisRocker(6e3,e)-1.5)),n.position.setFromSphericalCoords(this.cameraRho,this.cameraPhi,this.cameraTheta),n.lookAt(0,0,0)}},{key:"getAxisRocker",value:function(e,t){var n=2*e,i=Math.sign(t%n/e-1)>=0,s=t%e/e;return this.easeInOutSine(i?s:1-s)}},{key:"easeInOutSine",value:function(e){return-(Math.cos(Math.PI*e)-1)/2}},{key:"setupCanvas",value:function(e){this.mouseDragger=new v(e,this.dragCameraAround.bind(this)),this.keyboardPresser=new p(document.documentElement,this.moveCameraAround.bind(this))}},{key:"teardownCanvas",value:function(){var e,t;null===(e=this.mouseDragger)||void 0===e||e.teardown(),this.mouseDragger=void 0,null===(t=this.keyboardPresser)||void 0===t||t.teardown(),this.keyboardPresser=void 0}},{key:"setCameraThetaDelta",value:function(e){this.cameraTheta=y.getNormalizedSphericAngle(this.cameraTheta+e)}},{key:"setCameraPhiDelta",value:function(e){this.cameraPhi=y.limitNumericValue(0,Math.PI,this.cameraPhi+e)}},{key:"setCameraRhoDelta",value:function(e){this.cameraRho=y.limitNumericValue(2,7,this.cameraRho+e)}},{key:"dragCameraAround",value:function(e){var t=e.x,n=(e.y,e.z);this.setCameraThetaDelta(-t/100),this.setCameraPhiDelta(t/100),this.setCameraRhoDelta(n/100)}},{key:"getKeyDefaultDelta",value:function(e,t){return e>0?e:t}},{key:"moveCameraAround",value:function(e,t,n){var i=!0;switch(e){case"w":this.setCameraPhiDelta(this.getKeyDefaultDelta(t,50)/1e3);break;case"a":this.setCameraThetaDelta(this.getKeyDefaultDelta(t,50)/1e3);break;case"s":this.setCameraPhiDelta(-this.getKeyDefaultDelta(t,50)/1e3);break;case"d":this.setCameraThetaDelta(-this.getKeyDefaultDelta(t,50)/1e3);break;case"+":this.setCameraRhoDelta(-this.getKeyDefaultDelta(t,50)/1e3);break;case"-":this.setCameraRhoDelta(this.getKeyDefaultDelta(t,50)/1e3);break;default:i=!1}i&&n()}}]),n}(d),k=n(936),g=n.n(k),w="LzZek",M=function(e){var t=e.onInit,n=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=n.current;if(null!=e){var i=t(e),s=g()(i.update.bind(i),50);return window.addEventListener("resize",s),i.mount(),i.start(),function(){window.removeEventListener("resize",s),s.cancel(),i.stop(),i.unmount()}}}),[t]),(0,s.jsx)("div",{className:w,ref:n})},x=function(){var e=(0,i.useCallback)((function(e){return new f(e)}),[]);return(0,s.jsxs)("div",{children:[(0,s.jsx)(o,{}),(0,s.jsx)(M,{onInit:e})]})}}}]);