(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{3551:function(e,t,l){Promise.resolve().then(l.bind(l,1878))},1878:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return w}});var s=l(7573),n=l(7653),i=l(2706),r=l(7907);let a={tiles:[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,null]],hole:{x:3,y:3},lastMove:null,isPlaying:!1,isValid:!0,scrdata:{step:-1,total:0,speed:200}},o=(e,t)=>{let{x:l,y:s}=e,{x:n,y:i}=t;return n===l&&(i>0&&i===s+1||i<3&&i===s-1)||i===s&&(n>0&&n===l+1||n<3&&n===l-1)},u=e=>{for(let t=0;t<4;t+=1)for(let l=0;l<4;l+=1){let s=4*t+l+1;if(s<16&&s!==e[t][l])return!1}return!0},c=e=>{let{x:t,y:l}=e,s=[];return l>0&&s.push({x:t,y:l-1}),t<3&&s.push({x:t+1,y:l}),l<3&&s.push({x:t,y:l+1}),t>0&&s.push({x:t-1,y:l}),s[Math.floor(Math.random()*s.length)]},d=(e,t)=>e>=0&&e<t,h=(0,i.Ue)()((0,r.n)(e=>({...a,reset:()=>{e(e=>({...e,...a}))},move:t=>{e(e=>{o(t,e.hole)&&(e.isPlaying||(e.isPlaying=!0),e.tiles[e.hole.y][e.hole.x]=e.tiles[t.y][t.x],e.tiles[t.y][t.x]=null,e.lastMove=e.hole,e.hole=t,e.isValid=u(e.tiles),d(e.scrdata.step,e.scrdata.total)&&(e.scrdata.step+=1))})},scramble:function(t){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;e(e=>{e.scrdata.step<0&&(e.scrdata.step=0,e.scrdata.total=t,e.scrdata.speed=l)})},stop:()=>{e(e=>{e.scrdata.step=-1})}}))),p=(e,t)=>{let{x:l,y:s}=e,{x:n,y:i}=t;return l===n&&s===i},f=()=>{let{move:e,scrdata:{step:t,total:l,speed:s},lastMove:i,hole:r,stop:a,...o}=h();return(0,n.useEffect)(()=>{if(d(t,l))for(;;){let t=c(r);if(null==i||!p(t,i)){let l=setTimeout(()=>{e(t)},s);return()=>{clearTimeout(l)}}}else a()},[t,l,r,i,e,s,a]),(0,n.useMemo)(()=>({...o,isScrambling:d(t,l),lastMove:i,move:e}),[e,t,l,o,i])};var m=l(1774),x=l.n(m),_=l(5001),b=l(58);function j(e){let t=Object.assign({p:"p",a:"a"},(0,b.ah)(),e.components);return(0,_.jsxs)(t.p,{children:["This is an implementation of the game Fifteen, inspired after reading a story in the ",(0,_.jsx)(t.a,{href:"https://www.folklore.org/Puzzle.html",children:"Folklore.org"})," website."]})}var v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,b.ah)(),e.components);return t?(0,_.jsx)(t,Object.assign({},e,{children:(0,_.jsx)(j,e)})):j(e)};let y=(e,t)=>{var l;return null===(l=t.target[e])||void 0===l?void 0:l.value},g=(e,t,l)=>{if(null!=e){let t=parseInt(e);if(!isNaN(t)&&(null==l||l(t)))return t}return t};var w=()=>{let{move:e,reset:t,scramble:l,isPlaying:i,isValid:r,isScrambling:a,tiles:o}=f(),u=(t,l)=>()=>{a||e({x:t,y:l})};return(0,n.useEffect)(()=>{l(15)},[l]),(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{}),(0,s.jsx)("div",{className:x().tiles,children:o.map((e,t)=>(0,s.jsx)("div",{className:x().tiles_row,children:e.map((e,l)=>null==e?(0,s.jsx)("span",{className:x().tiles_hole,children:"\xa0"},"col-".concat(l)):(0,s.jsx)("button",{className:x().tiles_tile,onClick:u(l,t),children:e},"col-".concat(l)))},"row-".concat(t)))}),i&&r&&(0,s.jsx)("p",{children:"You won!"}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),a||l(g(y("moves",e),15,e=>e>=0),g(y("speed",e),200,e=>e>=0))},children:(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:"Controls"}),(0,s.jsx)("label",{htmlFor:"moves",children:"Moves"})," ",(0,s.jsx)("input",{type:"number",name:"moves",id:"moves",defaultValue:15,disabled:a})," ",(0,s.jsx)("label",{htmlFor:"moves",children:"Speed"})," ",(0,s.jsx)("input",{type:"number",name:"speed",id:"speed",defaultValue:200,disabled:a})," ",(0,s.jsx)("button",{type:"submit",disabled:a,children:"Scramble"}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{type:"button",onClick:t,disabled:a,children:"Reset"})]})})]})}},1774:function(e){e.exports={tiles:"Fifteen_tiles__xNC8m",tiles_row:"Fifteen_tiles_row__u6spT",tiles_hole:"Fifteen_tiles_hole__sQd01",tiles_tile:"Fifteen_tiles_tile__k27nq"}}},function(e){e.O(0,[868,293,997,744],function(){return e(e.s=3551)}),_N_E=e.O()}]);