(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4579],{817:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(8496);function i(e){return function n(t){return 0==arguments.length||(0,r.A)(t)?n:e.apply(this,arguments)}}},1478:(e,n)=>{var t;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var l=typeof t;if("string"===l||"number"===l)e.push(t);else if(Array.isArray(t)){if(t.length){var o=i.apply(null,t);o&&e.push(o)}}else if("object"===l){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){e.push(t.toString());continue}for(var c in t)r.call(t,c)&&t[c]&&e.push(c)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(t=(function(){return i}).apply(n,[]))||(e.exports=t)}()},1656:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(817),i=t(8496);function l(e){return function n(t,l){switch(arguments.length){case 0:return n;case 1:return(0,i.A)(t)?n:(0,r.A)(function(n){return e(t,n)});default:return(0,i.A)(t)&&(0,i.A)(l)?n:(0,i.A)(t)?(0,r.A)(function(n){return e(n,l)}):(0,i.A)(l)?(0,r.A)(function(n){return e(t,n)}):e(t,l)}}}},2602:(e,n,t)=>{"use strict";t.d(n,{default:()=>w});var r=t(4568),i=t(8842),l=t(8179),o=(0,t(1656).A)(function(e,n){return!!(!e^!n)}),c=t(7620),s=t(4571);function a(e){let n=Object.assign({p:"p",h2:"h2",ul:"ul",li:"li",em:"em"},(0,s.RP)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"An implementation of the crosswords schema with automatic calculation of\ndefinitions number."}),"\n",(0,r.jsx)(n.h2,{children:"Instructions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Click (or tap) on cells to activate the input. After providing a valid input\nyou're automatically moved to the next horizontal cell."}),"\n",(0,r.jsxs)(n.li,{children:["By double clicking a cell or pressing ",(0,r.jsx)(n.em,{children:"spacebar"})," you toggle the block.\nOn mobile devices it can be hard to toggle the block, you may have to focus\non an input and then ",(0,r.jsx)(n.em,{children:"very rapidly"})," double tap the cell."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You should try the templates for ",(0,r.jsx)(n.em,{children:"Incroci Obbligati"}),", ",(0,r.jsx)(n.em,{children:"Ricerca di Parole Crociate"}),"\nand ",(0,r.jsx)(n.em,{children:"Cornici Concentriche"})," modes, they seriously helped me to solve some schemes\nthat were hoplessly ",(0,r.jsx)(n.em,{children:"DOOOOMED"})," on paper. Inspired by that I added\nsome other recurring schemes in the ",(0,r.jsx)(n.em,{children:"Settimana Enigmistica"}),"."]})]})}let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.RP)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(a,e)})):a(e)};var h=t(6282),p=t.n(h),d=t(1478),f=t.n(d),m=t(9359),b=t(4582),v=t(5263);let x=e=>{let n=[];for(let t=0;t<e.length;t+=1)for(let r=0;r<e[t].length;r+=1)if(null!=e[t][r]){let i=0===t||null==e[t-1][r],l=0===r||null==e[t][r-1],o=t<e.length-1&&null!=e[t+1][r],c=r<e[t].length-1&&null!=e[t][r+1],s=i&&o,a=l&&c;(a||s)&&n.push({order:n.length+1,row:t,col:r,isHorizontal:a,isVertical:s,horizontalDefinition:"",verticalDefinition:""})}return n},g=e=>{let n,{rows:t,cols:r,showDefs:o=!0,showNumbers:c=!0,direction:s="H",oldState:a}=e,u=(0,i.A)(()=>(0,l.A)("",r),t);return null==a?n=x(u):(((e,n)=>{for(let t=0;t<n.length;t+=1)for(let r=0;r<n[t].length;r+=1)t<e.length&&r<e[t].length&&(n[t][r]=e[t][r])})(a.matrix,u),n=x(a.matrix)),{matrix:u,definitions:n,rows:t,cols:r,showDefs:o,showNumbers:c,direction:s}},_=(0,m.y)()((0,v.D)(e=>({...g({rows:12,cols:22,showDefs:!1,showNumbers:!0,direction:"H"}),setValue:n=>{e(e=>{e.matrix[n.row][n.col]=n.value})},toggleBlack:n=>{e(e=>{e.matrix[n.row][n.col]=null==e.matrix[n.row][n.col]?"":null,e.definitions=x(e.matrix)})},setSize:n=>{e(e=>g({rows:n.rows,cols:n.cols,showDefs:e.showDefs,showNumbers:e.showNumbers,oldState:e}))},setDefinition:n=>{e(e=>{e.definitions.forEach(e=>{e.row===n.row&&e.col===n.col&&(e.horizontalDefinition=n.horizontalDefinition,e.verticalDefinition=n.verticalDefinition)})})},setShowDefs:n=>{e(e=>{e.showDefs=n.showDefs})},setShowNumbers:n=>{e(e=>{e.showNumbers=n.showNumbers})},setIncrociObbligatiMode:()=>{e(g({rows:13,cols:9,showDefs:!1,showNumbers:!1}))},setRicercaMode:()=>{let n=g({rows:12,cols:14,showDefs:!1,showNumbers:!0});for(let e=0;e<3;e+=1)n.matrix[0][e]=null;e({...n,definitions:x(n.matrix)})},wipe:()=>{e(e=>g({rows:e.rows,cols:e.cols,showDefs:e.showDefs,showNumbers:e.showNumbers,oldState:{...e,matrix:e.matrix.map(e=>e.map(e=>null==e?null:"")),definitions:x(e.matrix)}}))},setCorniciConcentricheMode:()=>{let n=g({rows:13,cols:13,showDefs:!1,showNumbers:!1});n.matrix[Math.floor(6.5)][Math.floor(6.5)]=null,e({...n,definitions:x(n.matrix)})},setDirection:n=>{e(e=>{e.direction=n.direction})}}))),w=function(){let{matrix:e,definitions:n,rows:t,cols:l,showDefs:s,showNumbers:a,direction:h,...d}=(0,b.Pj)(_),m=(0,c.useRef)(null),v=(0,c.useRef)(null),x=(0,c.useRef)([]);(0,c.useMemo)(()=>{x.current=(0,i.A)(e=>(0,i.A)(n=>{var t,r;return null==(r=x.current)||null==(t=r[e])?void 0:t[n]},l),t)},[t,l]);let{h:g,v:w}=(0,c.useMemo)(()=>n.reduce((e,n)=>({...e,...n.isHorizontal&&{h:[...e.h,n]},...n.isVertical&&{v:[...e.v,n]}}),{h:[],v:[]}),[n]),j=(e,n)=>t=>{d.setDefinition({row:e.row,col:e.col,horizontalDefinition:"h"===n?t.target.value:e.horizontalDefinition,verticalDefinition:"v"===n?t.target.value:e.verticalDefinition})},y=e=>{d.setDirection({direction:e.target.value})},D=e=>()=>{d[e]()},C=13===t&&9===l&&!1===s&&!1===a,N=12===t&&14===l&&!1===s&&!0===a&&null==e[0][0]&&null==e[0][1]&&null==e[0][2],A=(0,c.useMemo)(()=>13===t&&13===l&&!1===s&&!1===a&&e.every((e,n)=>e.every((e,t)=>o(n===Math.floor(6.5)&&t===Math.floor(6.5),null!=e))),[e,l,t,s,a]);(0,c.useEffect)(()=>{null!=m.current&&(m.current.value="".concat(t)),null!=v.current&&(v.current.value="".concat(l))},[t,l]);let k=(0,r.jsxs)("div",{className:p().app,children:[(0,r.jsxs)("table",{className:p().app_table,children:[(0,r.jsx)("caption",{className:p().app_caption,children:C?"Incroci Obbligati":N?"Ricerca di Parole Crociate":A?"Cornici Concentriche":"Parole Crociate"}),(0,r.jsx)("tbody",{children:(0,i.A)(t=>(0,r.jsx)("tr",{children:(0,i.A)(i=>{let l=n.find(e=>e.row===t&&e.col===i);return(0,r.jsx)("td",{className:f()({[p().app_td]:!0,[p().app_td__grey]:A&&(t%2==1&&(i>=t&&i<13-t||i>=13-t-1&&i<13-(13-t-1))||i%2==1&&(t>=i&&t<13-i||t>=13-i-1&&t<13-(13-i-1)))}),onDoubleClick:()=>{d.toggleBlack({row:t,col:i})},children:((e,n,t)=>{if(null==t[e][n])return!0;let r=0===e||null==t[e-1][n],i=0===n||null==t[e][n-1],l=e===t.length-1||null==t[e+1][n],o=n===t[e].length-1||null==t[e][n+1];return r&&i&&l&&o})(t,i,e)?(0,r.jsx)("span",{className:p().app_black}):(0,r.jsxs)(r.Fragment,{children:[a&&null!=l&&(0,r.jsx)("span",{className:p().app_definition,children:l.order}),(0,r.jsx)("input",{className:p().app_input,name:"input-".concat(t,"-").concat(i),type:"text",value:e[t][i],onChange:e=>{let n=e.target.value.toUpperCase();/^[A-Z]?$/.test(n)&&d.setValue({row:t,col:i,value:n})},maxLength:1,ref:e=>{t<x.current.length&&i<x.current[t].length&&(x.current[t][i]=e)},onKeyDown:n=>{var r,l,o,c,s,a,u;" "===n.key&&(n.preventDefault(),d.toggleBlack({row:t,col:i})),"ArrowUp"===n.key&&t>0&&(null==(l=x.current.reduceRight((e,n,r)=>null==e&&r<t&&null!=n[i]?n[i]:e,null))||l.focus()),"ArrowDown"===n.key&&t<e.length-1&&(null==(o=x.current.reduce((e,n,r)=>null==e&&r>t&&null!=n[i]?n[i]:e,null))||o.focus()),"ArrowLeft"===n.key&&i>0&&(null==(c=x.current[t].reduceRight((e,n,t)=>null==e&&t<i&&null!=n?n:e,null))||c.focus()),"ArrowRight"===n.key&&i<e[t].length-1&&(null==(s=x.current[t].reduce((e,n,t)=>null==e&&t>i&&null!=n?n:e,null))||s.focus()),"Backspace"===n.key&&0===(null==(r=x.current[t][i])?void 0:r.value).length&&("H"===h&&i>0?null==(a=x.current[t].reduceRight((e,n,t)=>null==e&&t<i&&null!=n?n:e,null))||a.focus():"V"===h&&t>0&&(null==(u=x.current.reduceRight((e,n,r)=>null==e&&r<t&&null!=n[i]?n[i]:e,null))||u.focus()))},onKeyUp:n=>{if(/^[a-zA-Z]$/.test(n.key)){var r,l;"H"===h&&i<e[t].length-1?null==(r=x.current[t].reduce((e,n,t)=>null==e&&t>i&&null!=n?n:e,null))||r.focus():"V"===h&&t<e.length-1&&(null==(l=x.current.reduce((e,n,r)=>null==e&&r>t&&null!=n[i]?n[i]:e,null))||l.focus())}},autoComplete:"off"})]})},"".concat(t,"-").concat(i))},l)},t),t)})]}),s&&(0,r.jsxs)("div",{className:p().app_definitions,children:[g.length&&(0,r.jsxs)("div",{className:p().app_directionDefinitions,children:[(0,r.jsx)("h2",{children:"Orizzontali"}),(0,r.jsx)("ol",{children:g.map((e,n)=>(0,r.jsx)("li",{value:e.order,children:(0,r.jsx)("input",{className:p().app_definitionInput,name:"h-".concat(e.order),type:"text",value:e.horizontalDefinition,onChange:j(e,"h")})},"h-".concat(e.order,"-").concat(n)))})]}),w.length&&(0,r.jsxs)("div",{className:p().app_directionDefinitions,children:[(0,r.jsx)("h2",{children:"Verticali"}),(0,r.jsx)("ol",{children:w.map((e,n)=>(0,r.jsx)("li",{value:e.order,children:(0,r.jsx)("input",{className:p().app_definitionInput,name:"v-".concat(e.order),type:"text",value:e.verticalDefinition,onChange:j(e,"v")})},"v-".concat(e.order,"-").concat(n)))})]})]})]}),z=(0,r.jsx)("form",{onSubmit:e=>{var n,t,r,i;e.preventDefault();let l=parseInt(null!=(r=null==(n=m.current)?void 0:n.value)?r:""),o=parseInt(null!=(i=null==(t=v.current)?void 0:t.value)?i:"");d.setSize({rows:isNaN(l)||l<2?12:l,cols:isNaN(o)||o<2?22:o})},children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("legend",{children:"Opzioni"}),(0,r.jsx)("label",{htmlFor:"rows",children:"Numero di righe:"})," ",(0,r.jsx)("input",{name:"rows",defaultValue:t,ref:m,type:"number"})," ",(0,r.jsx)("label",{htmlFor:"cols",children:"Numero di colonne:"})," ",(0,r.jsx)("input",{name:"cols",defaultValue:l,ref:v,type:"number"})," ",(0,r.jsx)("button",{type:"submit",children:"Update"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{id:"showDefs",name:"showDefs",checked:s,onChange:e=>{d.setShowDefs({showDefs:e.target.checked})},type:"checkbox",value:"showDefs"}),(0,r.jsx)("label",{htmlFor:"showDefs",children:"Mostra definizioni"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{id:"showNumbers",name:"showNumbers",checked:a,onChange:e=>{d.setShowNumbers({showNumbers:e.target.checked})},type:"checkbox",value:"showNumbers"}),(0,r.jsx)("label",{htmlFor:"showNumbers",children:"Mostra numeri"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{id:"directionHorizontal",name:"direction",checked:"H"===h,onChange:y,type:"radio",value:"H"}),(0,r.jsx)("label",{htmlFor:"directionHorizontal",children:"Muoviti in orizzontale"})," ",(0,r.jsx)("input",{id:"directionVertical",name:"direction",checked:"V"===h,onChange:y,type:"radio",value:"V"}),(0,r.jsx)("label",{htmlFor:"directionVertical",children:"Muoviti in verticale"}),(0,r.jsx)("br",{}),(0,r.jsxs)("button",{onClick:D("setIncrociObbligatiMode"),type:"button",children:[(0,r.jsx)("em",{children:"Incroci obbligati"})," mode"]})," ",(0,r.jsxs)("button",{onClick:D("setRicercaMode"),type:"button",children:[(0,r.jsx)("em",{children:"Ricerca di Parole Crociate"})," mode"]})," ",(0,r.jsxs)("button",{onClick:D("setCorniciConcentricheMode"),type:"button",children:[(0,r.jsx)("em",{children:"Cornici Concentriche"})," mode"]})," ",(0,r.jsx)("button",{onClick:D("wipe"),type:"button",children:"Wipe"})]})});return(0,r.jsxs)("div",{children:[(0,r.jsx)(u,{}),(0,r.jsx)("div",{className:p().app_wrapper,children:k}),z]})}},6045:(e,n,t)=>{Promise.resolve().then(t.bind(t,2602))},6282:e=>{e.exports={app:"Cruciverba_app__u5eEw",app_table:"Cruciverba_app_table__o4zrp",app_td:"Cruciverba_app_td__gJ3AK",app_td__grey:"Cruciverba_app_td__grey__ROaCo",app_input:"Cruciverba_app_input__Wycwo",app_definition:"Cruciverba_app_definition__r7cX9",app_black:"Cruciverba_app_black__tGblG",app_caption:"Cruciverba_app_caption__3n9kA",app_definitions:"Cruciverba_app_definitions__AuKDC",app_directionDefinitions:"Cruciverba_app_directionDefinitions__XnQTI",app_definitionInput:"Cruciverba_app_definitionInput__K8pjn",app_wrapper:"Cruciverba_app_wrapper__N4Rd2"}},8179:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(1656),i=(0,t(817).A)(function(e){return function(){return e}}),l=t(8842);let o=(0,r.A)(function(e,n){return(0,l.A)(i(e),n)})},8496:(e,n,t)=>{"use strict";function r(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}t.d(n,{A:()=>r})},8842:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});let r=(0,t(1656).A)(function(e,n){var t=Number(n);if(t<0||isNaN(t))throw RangeError("n must be a non-negative number");for(var r=0,i=Array(t);r<t;)i[r]=e(r),r+=1;return i})}},e=>{e.O(0,[5352,6948,587,18,7358],()=>e(e.s=6045)),_N_E=e.O()}]);