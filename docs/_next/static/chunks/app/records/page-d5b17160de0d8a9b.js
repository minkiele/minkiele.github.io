(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3805:function(e,t,i){Promise.resolve().then(i.bind(i,5362)),Promise.resolve().then(i.bind(i,4288))},537:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(7653),l=i(1301);let r=i.n(l)().className;var s=i(288),a=i.n(s);function c(e){let{children:t}=e;return(0,n.createElement)("span",{className:"".concat(r," ").concat(a().emoji)},t)}},5362:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i(7573),l=i(7653);let r=Symbol("IDLE"),s=Symbol("PLAY"),a=Symbol("GAMEOVER"),c=Symbol("WINNER");var o=i(1569),d=i.n(o),p=i(8618),u=i(537),f=i(7197),h=i.n(f),_=i(5162);let m={enter:h().startFlip,enterActive:h().startFlipActive,enterDone:h().startFlipDone,exit:h().finishFlip,exitActive:h().finishFlipActive,exitDone:h().finishFlipDone},g={enter:h().startFlipBack,enterActive:h().startFlipBackActive,enterDone:h().startFlipBackDone,exit:h().finishFlipBack,exitActive:h().finishFlipBackActive,exitDone:h().finishFlipBackDone};function x(e){let{children:t,className:i,isFlipped:r=!1}=e,s=(0,l.useRef)(null),[a,c]=(0,l.useState)(0);return(0,l.useEffect)(()=>{r&&0===a?c(1):r||2!==a||c(3)},[r,a]),(0,l.useEffect)(()=>{4===a&&c(0)},[a]),(0,n.jsx)(_.Z,{in:1===a||3===a,nodeRef:s,onEntered:()=>{c(e=>e+1)},timeout:150,classNames:a<3?m:g,children:(0,n.jsx)("span",{ref:s,className:i,children:"function"==typeof t?t({isFront:2===a||3===a,isBack:a<2||4===a}):t})})}var v=i(7129),F=i.n(v),b=e=>{let{children:t,className:i,show:r,onToggle:s}=e,[a,c]=(0,l.useState)(!1),o=(0,l.useCallback)(()=>c(e=>!e),[]),p=null==r||null==s;return(0,l.useEffect)(()=>{null!=r&&c(r)},[r]),(0,n.jsxs)("div",{className:F()(d().toggler,i,{[d().toggler__show]:a}),children:[p&&(0,n.jsx)("div",{className:d().toggler_control,children:(0,n.jsx)("span",{role:"button",onClick:e=>{null==s||s(e,a),e.isDefaultPrevented()||o()},className:d().toggler_controlButton,children:a?"-":"+"})}),(0,n.jsx)("div",{className:d().toggler_content,children:t})]})},j=i(9774);function k(e){let{deck:t}=e,{status:i,left:o,cards:f,matched:h,flip:_,isFlipped:m,reset:g}=function(e){let[{cards:t,matched:i,flipped:n,status:o,left:d,wait:p},u]=(0,l.useReducer)((e,t)=>{switch(t.type){case"reset":return{...e,cards:t.cards,flipped:[],left:t.left,matched:[],status:s,wait:t.wait,redeem:t.redeem};case"flip":if(e.status===s){if(0===e.flipped.length)return{...e,flipped:[t.index]};if(e.flipped[0]!==t.index&&e.cards[e.flipped[0]]===e.cards[t.index]){let t={...e,flipped:[],matched:[...e.matched,e.cards[e.flipped[0]].id]};if((e.matched.length+1)*2===e.cards.length)return{...t,status:c};return e.redeem&&(t.left+=1),t}{let i={...e,flipped:[...e.flipped,t.index]};if(e.left>0)return i;return{...i,flipped:[...e.flipped,t.index],left:0,status:a}}}return e;case"cover":return{...e,flipped:[],left:e.left-1}}},{cards:[],matched:[],flipped:[],status:r,left:-1,wait:-1,redeem:!1}),f=(0,l.useCallback)(function(){let{size:t=12,left:i=3,wait:n=1500,redeem:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u({type:"reset",cards:function(e,t){var i;let n=e>=(i=t.length)?i%2==0?i:i-1:e%2==0?e:e+1,l=[],r=Array.from({length:n}).fill(void 0);for(;l.length<n/2;){let e=t[Math.floor(Math.random()*t.length)];l.some(t=>t.id===e.id)||l.push(e)}for(let e=0;e<l.length;e+=1){let t=0;for(;t<2;){let i=Math.floor(Math.random()*r.length);null==r[i]&&(r[i]=l[e],t+=1)}}return r}(t,e),left:i,wait:n,redeem:l})},[e]);(0,l.useEffect)(()=>{f()},[f]),(0,l.useEffect)(()=>{if(n.length>1&&d>0){let e=setTimeout(()=>{u({type:"cover"})},p);return()=>{clearTimeout(e)}}},[n,d,p]);let h=(0,l.useCallback)(e=>{n.length<2&&u({type:"flip",index:e})},[n]),_=(0,l.useCallback)(e=>o===a||n.includes(e)||i.includes(t[e].id),[o,n,t,i]);return(0,l.useMemo)(()=>({cards:t,matched:i,flipped:n,status:o,left:d,reset:f,flip:h,isFlipped:_}),[t,i,n,o,d,f,h,_])}(t),v=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return()=>{g(...t),window.scrollTo({top:0,left:0,behavior:"smooth"})}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("ol",{className:d().list,children:f.map((e,t)=>{let l=m(t),r=i===a||h.includes(e.id),s=e=>()=>{_(e)};return(0,n.jsxs)("li",{className:d().list_item,children:[(0,n.jsx)(x,{isFlipped:l,className:d().imageWrapper,children:i=>{let{isBack:l}=i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.default,{src:e.thumb,alt:"Cover image",fill:!0,className:F()(d().image,{[d().image__hidden]:l}),priority:t<12}),l&&(0,n.jsx)("button",{type:"button",className:d().cover,onClick:s(t),children:(0,n.jsx)(u.Z,{children:"\uD83D\uDE05"})})]})}}),r&&(0,n.jsx)(b,{show:i===c||i===a||void 0,onToggle:i===c||i===a?j.Z:void 0,children:(0,n.jsxs)("span",{className:d().recordDescription,children:[(0,n.jsx)("strong",{children:e.artist}),": ",e.title," (",e.medium,")"]})})]},"".concat(e.id,"-").concat(t))})}),i===s&&(0,n.jsxs)("p",{children:["You have ",o," tries left."]}),i===a&&(0,n.jsx)("p",{children:"Sorry, game over."}),i===c&&(0,n.jsx)("p",{children:"You won!"}),(0,n.jsx)("div",{children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("legend",{children:"Commands"}),(0,n.jsx)("button",{type:"button",onClick:v(),children:"New game"})," ",(0,n.jsx)("button",{type:"button",onClick:v({size:16,left:5}),children:"New game slightly bigger"})," ",(0,n.jsx)("button",{type:"button",onClick:v({size:24,left:8}),children:"New game double"})," ",(0,n.jsx)("button",{type:"button",onClick:v({size:2*t.length,left:1/0,wait:750}),children:"New game Avengers"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=e.target,i=Math.abs(parseInt(t.tries.value)),n=Math.abs(parseInt(t.size.value)),l=Math.abs(parseInt(t.wait.value)),r=t.infiniteTries.checked?1/0:isNaN(i)?void 0:i;g({left:r,size:isNaN(n)?void 0:Math.max(4,n-n%4),wait:isNaN(l)?void 0:l,redeem:t.redeem.checked})},children:[(0,n.jsx)("label",{htmlFor:"tries",children:"Tries"})," ",(0,n.jsx)("input",{id:"tries",name:"tries",type:"number",defaultValue:3,min:1})," ",(0,n.jsx)("input",{id:"infiniteTries",name:"infiniteTries",type:"checkbox",value:"infiniteTries"})," ",(0,n.jsx)("label",{htmlFor:"infiniteTries",children:"Infinite tries"})," ",(0,n.jsx)("label",{htmlFor:"size",children:"Size"})," ",(0,n.jsx)("input",{id:"size",name:"size",type:"number",defaultValue:12,min:4,max:2*t.length,step:4})," ",(0,n.jsx)("label",{htmlFor:"wait",children:"Waiting time before"})," ",(0,n.jsx)("input",{id:"wait",name:"wait",type:"number",defaultValue:1500,min:0})," ",(0,n.jsx)("input",{id:"redeem",name:"redeem",type:"checkbox",value:"redeem"})," ",(0,n.jsx)("label",{htmlFor:"redeem",children:"Get one more try for every match"})," ",(0,n.jsx)("button",{type:"submit",children:"New game with custom options"})]})]})})]})}},4288:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i(7653),l=i(5001),r=i(58);function s(e){let t=Object.assign({p:"p"},(0,r.ah)(),e.components);return(0,l.jsx)(t.p,{children:"A little Memory game where the cards are my records collection."})}var a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,l.jsx)(t,Object.assign({},e,{children:(0,l.jsx)(s,e)})):s(e)};function c(){return(0,n.createElement)(a)}},288:function(e){e.exports={emoji:"Emoji_emoji__KdCI2"}},1569:function(e){e.exports={list:"Records_list__G7bAn",list_item:"Records_list_item__WfYnG",imageWrapper:"Records_imageWrapper__v6e08",image:"Records_image__xn4a5",image__hidden:"Records_image__hidden__i7I7O",cover:"Records_cover__baXEy",toggler:"Records_toggler__eWc38",toggler_control:"Records_toggler_control__1oU_Y",toggler_controlButton:"Records_toggler_controlButton__IoNVx",toggler_content:"Records_toggler_content__TAH4Z",toggler__show:"Records_toggler__show__2XYwb",recordDescription:"Records_recordDescription__KwoKk"}},7197:function(e){e.exports={startFlip:"FlipCard_startFlip__W8iSP",startFlipActive:"FlipCard_startFlipActive___jwK4",startFlipDone:"FlipCard_startFlipDone__0E3aP",finishFlip:"FlipCard_finishFlip__qBl7c",finishFlipActive:"FlipCard_finishFlipActive__yXNV2",finishFlipDone:"FlipCard_finishFlipDone__Ff_Rt",startFlipBack:"FlipCard_startFlipBack__NllcR",startFlipBackActive:"FlipCard_startFlipBackActive__n6Jvz",startFlipBackDone:"FlipCard_startFlipBackDone__BbIty",finishFlipBack:"FlipCard_finishFlipBack__XlDxU",finishFlipBackActive:"FlipCard_finishFlipBackActive__tv17_",finishFlipBackDone:"FlipCard_finishFlipBackDone__wC3cq"}}},function(e){e.O(0,[538,293,997,744],function(){return e(e.s=3805)}),_N_E=e.O()}]);