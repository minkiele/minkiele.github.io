(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3805:function(e,t,i){Promise.resolve().then(i.bind(i,3922)),Promise.resolve().then(i.bind(i,4288))},537:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(7653),r=i(1301);let s=i.n(r)().className;var l=i(288),a=i.n(l);function c(e){let{children:t}=e;return(0,n.createElement)("span",{className:"".concat(s," ").concat(a().emoji)},t)}},3922:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i(7573),r=i(7653);let s=Symbol("IDLE"),l=Symbol("PLAY"),a=Symbol("GAMEOVER"),c=Symbol("WINNER");var o=i(1569),u=i.n(o),d=i(6072),f=i.n(d),m=i(537);function p(e){let{deck:t}=e,{status:i,left:o,cards:d,matched:p,flip:h,isFlipped:x,reset:b}=function(e){let[{cards:t,matched:i,flipped:n,status:o,left:u,wait:d},f]=(0,r.useReducer)((e,t)=>{switch(t.type){case"reset":return{...e,cards:t.cards,flipped:[],left:t.left,matched:[],status:l,wait:t.wait};case"flip":if(e.status===l){if(0===e.flipped.length)return{...e,flipped:[t.index]};if(e.cards[e.flipped[0]]===e.cards[t.index]){let t={...e,flipped:[],matched:[...e.matched,e.cards[e.flipped[0]].id]};if((e.matched.length+1)*2===e.cards.length)return{...t,status:c};return t}{let i={...e,flipped:[...e.flipped,t.index]};if(e.left>0)return i;return{...i,flipped:[...e.flipped,t.index],left:0,status:a}}}return e;case"cover":return{...e,flipped:[],left:e.left-1}}},{cards:[],matched:[],flipped:[],status:s,left:-1,wait:-1}),m=(0,r.useCallback)(function(){let{size:t=12,left:i=3,wait:n=1500}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f({type:"reset",cards:function(e,t){var i;let n=e>=(i=t.length)?i%2==0?i:i-1:e%2==0?e:e+1,r=[],s=Array.from({length:n}).fill(void 0);for(;r.length<n/2;){let e=t[Math.floor(Math.random()*t.length)];r.some(t=>t.id===e.id)||r.push(e)}for(let e=0;e<r.length;e+=1){let t=0;for(;t<2;){let i=Math.floor(Math.random()*s.length);null==s[i]&&(s[i]=r[e],t+=1)}}return s}(t,e),left:i,wait:n})},[e]);(0,r.useEffect)(()=>{m()},[m]),(0,r.useEffect)(()=>{if(n.length>1&&u>0){let e=setTimeout(()=>{f({type:"cover"})},d);return()=>{clearTimeout(e)}}},[n,u,d]);let p=(0,r.useCallback)(e=>{n.length<2&&f({type:"flip",index:e})},[n]),h=(0,r.useCallback)(e=>o===a||n.includes(e)||i.includes(t[e].id),[o,n,t,i]);return(0,r.useMemo)(()=>({cards:t,matched:i,flipped:n,status:o,left:u,reset:m,flip:p,isFlipped:h}),[t,i,n,o,u,m,p,h])}(t);return(0,n.jsxs)("div",{children:[(0,n.jsx)("ol",{className:u().list,children:d.map((e,t)=>{let r=x(t),s=i===a||p.includes(e.id);return(0,n.jsxs)("li",{className:u().list_item,children:[(0,n.jsx)("span",{className:u().imageWrapper,children:r?(0,n.jsx)(f(),{src:e.thumb,alt:"Cover image",fill:!0,className:u().image,priority:t<4}):(0,n.jsx)("button",{type:"button",className:u().cover,onClick:()=>{h(t)},children:(0,n.jsx)(m.Z,{children:"\uD83D\uDE05"})})}),s&&(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:e.artist}),": ",e.title," (",e.medium,")"]})]},"".concat(e.id,"-").concat(t))})}),i===l&&(0,n.jsxs)("p",{children:["You have ",o," tries left."]}),i===a&&(0,n.jsx)("p",{children:"Sorry, game over."}),i===c&&(0,n.jsx)("p",{children:"You won!"}),(0,n.jsx)("div",{children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("legend",{children:"Commands"}),(0,n.jsx)("button",{type:"button",onClick:()=>{b()},children:"New game"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=e.target,i=Math.abs(parseInt(t.tries.value)),n=Math.abs(parseInt(t.size.value)),r=Math.abs(parseInt(t.wait.value));b({left:t.infiniteTries.checked?1/0:isNaN(i)?3:i,size:isNaN(n)?12:n%2==0?n:n+1,wait:isNaN(r)?1500:r})},children:[(0,n.jsx)("label",{htmlFor:"tries",children:"Tries"})," ",(0,n.jsx)("input",{id:"tries",name:"tries",type:"number",defaultValue:3,min:1})," ",(0,n.jsx)("input",{id:"infiniteTries",name:"infiniteTries",type:"checkbox",value:"infiniteTries"})," ",(0,n.jsx)("label",{htmlFor:"infiniteTries",children:"Infinite tries"})," ",(0,n.jsx)("label",{htmlFor:"size",children:"Size"})," ",(0,n.jsx)("input",{id:"size",name:"size",type:"number",defaultValue:12,min:4,max:t.length,step:2})," ",(0,n.jsx)("label",{htmlFor:"wait",children:"Waiting time before"})," ",(0,n.jsx)("input",{id:"wait",name:"wait",type:"number",defaultValue:1500,min:0})," ",(0,n.jsx)("button",{type:"submit",children:"New game with custom options"})]})]})})]})}},4288:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i(7653),r=i(5505),s=i(7953);function l(e){let t=Object.assign({p:"p"},(0,s.ah)(),e.components);return(0,r.jsx)(t.p,{children:"A little Memory game where the cards are my records collection."})}var a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,s.ah)(),e.components);return t?(0,r.jsx)(t,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)};function c(){return(0,n.createElement)(a)}},288:function(e){e.exports={emoji:"Emoji_emoji__KdCI2"}},1569:function(e){e.exports={list:"Records_list__G7bAn",list_item:"Records_list_item__WfYnG",imageWrapper:"Records_imageWrapper__v6e08",image:"Records_image__xn4a5",cover:"Records_cover__baXEy"}}},function(e){e.O(0,[663,293,16,744],function(){return e(e.s=3805)}),_N_E=e.O()}]);