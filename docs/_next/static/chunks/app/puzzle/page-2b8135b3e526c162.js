(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6667],{1398:(t,e,r)=>{Promise.resolve().then(r.bind(r,9298))},4749:t=>{t.exports={board:"Puzzle_board__47v4Z"}},9298:(t,e,r)=>{"use strict";r.d(e,{default:()=>R});var n=r(4568),i=r(7620);let s=Symbol("IN"),o=Symbol("OUT"),l=Symbol("FLAT"),c=t=>{let{N:e,S:r,W:n,E:i}=t;return e===l&&i===l&&r!==l&&n!==l||i===l&&r===l&&n!==l&&e!==l||r===l&&n===l&&e!==l&&i!==l||n===l&&e===l&&i!==l&&r!==l},a=t=>{let{N:e,S:r,W:n,E:i}=t;return c({N:e,S:r,W:n,E:i})||e===l&&i!==l&&r!==l&&n!==l||i===l&&r!==l&&n!==l&&e!==l||r===l&&n!==l&&e!==l&&i!==l||n===l&&e!==l&&i!==l&&r!==l},u=t=>{let{N:e,S:r,W:n,E:i}=t;return a({N:e,S:r,W:n,E:i})||e!==l&&i!==l&&r!==l&&n!==l};class h{rotate(){return new h(this.segments.map(t=>t.rotate()))}reflect(){return new h(this.segments.map(t=>t.reflect()))}add(t){return this.segments.push(t),this}join(t){return this.segments.push(...t.segments),this}toString(){return this.segments.map(t=>t.toString()).join(" ")}constructor(t=[]){this.segments=t}}class d{rotate(){return new d(-this.y,this.x)}reflect(){return new d(this.x,-this.y)}getDirective(){return this.relative?"m":"M"}toString(){return"".concat(this.getDirective()," ").concat(this.x," ").concat(this.y)}constructor(t,e,r=!0){this.x=t,this.y=e,this.relative=r}}class w{rotate(){return new w(-this.y1,this.x1,-this.y2,this.x2,-this.y,this.x)}reflect(){return new w(this.x1,-this.y1,this.x2,-this.y2,this.x,-this.y)}getDirective(){return this.relative?"c":"C"}toString(){return"".concat(this.getDirective()," ").concat(this.x1," ").concat(this.y1," ").concat(this.x2," ").concat(this.y2," ").concat(this.x," ").concat(this.y)}constructor(t,e,r,n,i,s,o=!0){this.x1=t,this.y1=e,this.x2=r,this.y2=n,this.x=i,this.y=s,this.relative=o}}class g{rotate(){return new g(-this.y,this.x)}reflect(){return new g(this.x,-this.y)}getDirective(){return this.relative?"l":"L"}toString(){return"".concat(this.getDirective()," ").concat(this.x," ").concat(this.y)}constructor(t,e,r=!0){this.x=t,this.y=e,this.relative=r}}let f=new h([new w(24,0,40,-6,40,2),new w(0,7,-16,28,10,28),new w(26,0,10,-21,10,-28),new w(0,-8,16,-2,40,-2)]),p=f.reflect(),m=new h([new g(100,0)]),x=t=>t===l?m:t===s?f:p,v=[s,o],y=()=>v[Math.floor(2*Math.random())],S=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(;;){var e,r,n,i;let s={N:null!=(e=t.N)?e:y(),E:null!=(r=t.E)?r:y(),S:null!=(n=t.S)?n:y(),W:null!=(i=t.W)?i:y()};if(u(s))return s}},j=(t,e)=>{let r=[];for(let n=0;n<t;n+=1){r[n]=[];for(let i=0;i<e;i+=1)r[n][i]=S({N:0===n?l:r[n-1][i].S===o?s:o,W:0===i?l:r[n][i-1].E===o?s:o,...n===t-1&&{S:l},...i===e-1&&{E:l}})}return r},b=(t,e)=>e.some(e=>{let{row:r,col:n}=e;return r===t.row&&n===t.col}),N=async function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!b(t,n)){let i=0===t.row,c=t.col===e[0].length-1,a=t.row===e.length-1,u=0===t.col,h=!i&&b({row:t.row-1,col:t.col},n),d=!c&&b({row:t.row,col:t.col+1},n),w=!a&&b({row:t.row+1,col:t.col},n),g=!u&&b({row:t.row,col:t.col-1},n),f=i||h,p=c||d,m=a||w,x=u||g,v=S({...f&&{N:h?e[t.row-1][t.col].S===s?o:s:l},...p&&{E:d?e[t.row][t.col+1].W===s?o:s:l},...m&&{S:w?e[t.row+1][t.col].N===s?o:s:l},...x&&{W:g?e[t.row][t.col-1].E===s?o:s:l}}),y=e[t.row][t.col];e[t.row][t.col]=v,await r(e),n.push(t),f||y.N===v.N||await N({row:t.row-1,col:t.col},e,r,n),p||y.E===v.E||await N({row:t.row,col:t.col+1},e,r,n),m||y.S===v.S||await N({row:t.row+1,col:t.col},e,r,n),x||y.W===v.W||await N({row:t.row,col:t.col-1},e,r,n)}return e};var E=r(4749),W=r.n(E),C=r(9874);function k(t){let e=Object.assign({p:"p"},(0,C.RP)(),t.components);return(0,n.jsx)(e.p,{children:"Random puzzle grid generator."})}let P=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,C.RP)(),t.components);return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(k,t)})):k(t)};var _=r(9758),O=r.n(_);let D=t=>{let{N:e,S:r,W:s,E:o,className:l,...w}=t,{N:g,S:f,W:p,E:m}=(t=>{let[e,r]=(0,i.useReducer)((t,e)=>{switch(e.type){case"set":return{...e.edges,isCorner:c(e.edges),isFrame:a(e.edges),isValid:u(e.edges)};case"rotate":let{clockwise:r=!0}=e;return{...t,...r?{N:t.W,S:t.E,W:t.S,E:t.N}:{N:t.E,S:t.W,W:t.N,E:t.S}}}},{N:t.N,S:t.S,W:t.W,E:t.E,isCorner:c(t),isFrame:a(t),isValid:u(t)}),n=(0,i.useCallback)(t=>r({type:"set",edges:t}),[]);(0,i.useEffect)(()=>{n(t)},[t,n]);let s=(0,i.useCallback)(function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return r({type:"rotate",clockwise:t})},[]);return(0,i.useMemo)(()=>({...e,set:n,rotate:s}),[e,n,s])})((0,i.useMemo)(()=>({N:e,S:r,W:s,E:o}),[e,r,s,o])),v=(0,i.useMemo)(()=>(t=>{let{N:e,E:r,S:n,W:i}=t,s=new h([new d(0,0)]);return s.join(x(e)),s.join(x(r).rotate()),s.join(x(n).rotate().rotate()),s.join(x(i).rotate().rotate().rotate()),s.toString()})({N:g,S:f,W:p,E:m}),[g,f,p,m]);return(0,n.jsx)("path",{...w,d:v,className:O()(l,"outline")})};function M(t){let{grid:e,onPieceClick:r,...s}=t,o=e.length,l=e[0].length;return(0,n.jsx)("svg",{...s,viewBox:"0 0 ".concat(100*l," ").concat(100*o),children:null==e?void 0:e.map((t,e)=>t.map((t,n)=>(0,i.createElement)(D,{...t,key:"".concat(e,"-").concat(n),onClick:i=>{null==r||r(e,n,t,i)},transform:"translate(".concat(100*n,", ").concat(100*e,")")})))})}let F=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=parseInt(t,10);return isNaN(r)?e:r};function R(){let[t,e]=(0,i.useState)();return(0,i.useEffect)(()=>{e(j(10,10))},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)(P,{}),(0,n.jsx)("div",{children:t&&(0,n.jsx)(M,{grid:t,className:W().board,onPieceClick:(r,n)=>{null!=t&&N({row:r,col:n},[...t],async t=>{await new Promise(t=>{setTimeout(()=>{t()},50)}),e([...t])})}})}),(0,n.jsx)("div",{children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("legend",{children:"Parameters"}),(0,n.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e(j(F(t.target.width.value),F(t.target.height.value)))},children:[(0,n.jsx)("label",{htmlFor:"width",children:"Width"})," ",(0,n.jsx)("input",{id:"width",name:"width",type:"number",defaultValue:10,min:2,required:!0})," ",(0,n.jsx)("label",{htmlFor:"height",children:"Height"})," ",(0,n.jsx)("input",{id:"height",name:"height",type:"number",defaultValue:10,min:2,required:!0})," ",(0,n.jsx)("button",{type:"submit",children:"Update"})]})]})})]})}},9758:(t,e)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var s=typeof r;if("string"===s||"number"===s)t.push(r);else if(Array.isArray(r)){if(r.length){var o=i.apply(null,r);o&&t.push(o)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){t.push(r.toString());continue}for(var l in r)n.call(r,l)&&r[l]&&t.push(l)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=(function(){return i}).apply(e,[]))||(t.exports=r)}()},9874:(t,e,r)=>{"use strict";r.d(e,{RP:()=>s});var n=r(7620);let i=n.createContext({});function s(t){let e=n.useContext(i);return n.useMemo(()=>"function"==typeof t?t(e):{...e,...t},[e,t])}}},t=>{t.O(0,[8656,587,1902,7358],()=>t(t.s=1398)),_N_E=t.O()}]);