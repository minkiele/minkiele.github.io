(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{5992:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cruciverba",function(){return t(140)}])},140:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return m},default:function(){return _}});var l=t(5893),r=t(4824),i=t(7294),o=t(1151);function s(e){let n=Object.assign({p:"p",em:"em"},(0,o.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"An implementation of the crosswords schema with automatic calculation of\ndefinitions number. Definitely not suitable for mobile devices, it will\nfrustrate you soooo much."}),"\n",(0,l.jsxs)(n.p,{children:["You should try the ",(0,l.jsx)(n.em,{children:"Incroci Obbligati"})," mode, it seriously helped me to\nsolve some scheme that were ",(0,l.jsx)(n.em,{children:"DOOOOMED"})," on paper."]})]})}var a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,l.jsx)(n,Object.assign({},e,{children:(0,l.jsx)(s,e)})):s(e)},c=t(2610),u=t.n(c);let p=(e,n,t)=>{if(null==t[e][n])return!0;let l=0===e||null==t[e-1][n],r=0===n||null==t[e][n-1],i=e===t.length-1||null==t[e+1][n],o=n===t[e].length-1||null==t[e][n+1];return l&&r&&i&&o},h=e=>{let n=[];for(let t=0;t<e.length;t+=1)for(let l=0;l<e[t].length;l+=1)if(null!=e[t][l]){let r=0===t||null==e[t-1][l],i=0===l||null==e[t][l-1],o=t<e.length-1&&null!=e[t+1][l],s=l<e[t].length-1&&null!=e[t][l+1],a=r&&o,c=i&&s;(c||a)&&n.push({order:n.length+1,row:t,col:l,isHorizontal:c,isVertical:a,horizontalDefinition:"",verticalDefinition:""})}return n},d=(e,n)=>{for(let t=0;t<n.length;t+=1)for(let l=0;l<n[t].length;l+=1)t<e.length&&l<e[t].length&&(n[t][l]=e[t][l])},f=e=>{let n,{rows:t,cols:l,showDefs:i=!0,showNumbers:o=!0,oldState:s}=e,a=(0,r.DZ1)(()=>(0,r.rx1)("",l),t);return null==s?n=h(a):(d(s.matrix,a),n=h(s.matrix)),{matrix:a,definitions:n,rows:t,cols:l,showDefs:i,showNumbers:o}};var m=!0,_=function(){let[{matrix:e,definitions:n,rows:t,cols:o,showDefs:s,showNumbers:c},d]=(0,i.useReducer)((e,n)=>{switch(n.type){case"setValue":{let t=(0,r.d9v)(e.matrix);return t[n.row][n.col]=n.value,{...e,matrix:t}}case"toggleBlack":{let l=(0,r.d9v)(e.matrix);return l[n.row][n.col]=null==l[n.row][n.col]?"":null,{...e,matrix:l,definitions:h(l)}}case"setSize":return f({rows:n.rows,cols:n.cols,showDefs:e.showDefs,showNumbers:e.showNumbers,oldState:e});case"setDefinition":return{...e,definitions:e.definitions.reduce((e,t)=>[...e,{...t,...t.row===n.row&&t.col===n.col&&{horizontalDefinition:n.horizontalDefinition,verticalDefinition:n.verticalDefinition}}],[])};case"setShowDefs":return{...e,showDefs:n.showDefs};case"setShowNumbers":return{...e,showNumbers:n.showNumbers};case"setIncrociObbligatiMode":return f({rows:13,cols:9,showDefs:!1,showNumbers:!1,oldState:e});case"setRicercaMode":{let i=f({rows:12,cols:14,showDefs:!1,showNumbers:!0,oldState:e});for(let o=0;o<3;o+=1)i.matrix[0][o]=null;return{...i,definitions:h(i.matrix)}}}},{rows:12,cols:22,showDefs:!1,showNumbers:!0},f),m=(0,i.useRef)(null),_=(0,i.useRef)(null),v=(0,i.useRef)((0,r.DZ1)(()=>(0,r.rx1)(null,o),t)),b=(e,n)=>t=>{e<v.current.length&&n<v.current[e].length&&(v.current[e][n]=t)},{h:x,v:w}=(0,i.useMemo)(()=>n.reduce((e,n)=>({...e,...n.isHorizontal&&{h:[...e.h,n]},...n.isVertical&&{v:[...e.v,n]}}),{h:[],v:[]}),[n]),j=(e,n)=>t=>{let l=t.target.value.toUpperCase();/^[A-Z]?$/.test(l)&&d({type:"setValue",row:e,col:n,value:l})},g=(e,n)=>()=>{d({type:"toggleBlack",row:e,col:n})},D=e=>{var n,t,l,i;e.preventDefault();let o=parseInt(null!==(l=null===(n=m.current)||void 0===n?void 0:n.value)&&void 0!==l?l:""),s=parseInt(null!==(i=null===(t=_.current)||void 0===t?void 0:t.value)&&void 0!==i?i:"");v.current=(0,r.DZ1)(()=>(0,r.rx1)(null,s),o),d({type:"setSize",rows:isNaN(o)||o<2?12:o,cols:isNaN(s)||s<2?22:s})},N=(e,n)=>t=>{d({type:"setDefinition",row:e.row,col:e.col,horizontalDefinition:"h"===n?t.target.value:e.horizontalDefinition,verticalDefinition:"v"===n?t.target.value:e.verticalDefinition})},y=e=>{d({type:"setShowDefs",showDefs:e.target.checked})},C=e=>{d({type:"setShowNumbers",showNumbers:e.target.checked})},k=()=>{d({type:"setIncrociObbligatiMode"})},z=()=>{d({type:"setRicercaMode"})},O=(n,t)=>l=>{var r,i,o,s,a,c;"ArrowUp"===l.key&&n>0&&(null===(i=v.current.reduceRight((e,l,r)=>null==e&&r<n&&null!=l[t]?l[t]:e,null))||void 0===i||i.focus()),"ArrowDown"===l.key&&n<e.length-1&&(null===(o=v.current.reduce((e,l,r)=>null==e&&r>n&&null!=l[t]?l[t]:e,null))||void 0===o||o.focus()),"ArrowLeft"===l.key&&t>0&&(null===(s=v.current[n].reduceRight((e,n,l)=>null==e&&l<t&&null!=n?n:e,null))||void 0===s||s.focus()),"ArrowRight"===l.key&&t<e[n].length-1&&(null===(a=v.current[n].reduce((e,n,l)=>null==e&&l>t&&null!=n?n:e,null))||void 0===a||a.focus()),"Backspace"===l.key&&0===(null===(r=v.current[n][t])||void 0===r?void 0:r.value).length&&t>0&&(null===(c=v.current[n].reduceRight((e,n,l)=>null==e&&l<t&&null!=n?n:e,null))||void 0===c||c.focus())},R=(n,t)=>l=>{if(/^[a-zA-Z]$/.test(l.key)&&t<e[n].length-1){var r;null===(r=v.current[n].reduce((e,n,l)=>null==e&&l>t&&null!=n?n:e,null))||void 0===r||r.focus()}},S=12===t&&14===o&&!1===s&&!0===c&&null==e[0][0]&&null==e[0][1]&&null==e[0][2];(0,i.useEffect)(()=>{null!=m.current&&(m.current.value="".concat(t)),null!=_.current&&(_.current.value="".concat(o))},[t,o]);let I=(0,l.jsxs)("div",{className:u().app,children:[(0,l.jsxs)("table",{className:u().app_table,children:[(0,l.jsx)("caption",{className:u().app_caption,children:13===t&&9===o&&!1===s&&!1===c?"Incroci Obbligati":S?"Ricerca di Parole Crociate":"Parole Crociate"}),(0,l.jsx)("tbody",{children:(0,r.DZ1)(t=>(0,l.jsx)("tr",{children:(0,r.DZ1)(r=>{let i=n.find(e=>e.row===t&&e.col===r);return(0,l.jsx)("td",{className:u().app_td,onDoubleClick:g(t,r),children:p(t,r,e)?(0,l.jsx)("span",{className:u().app_black}):(0,l.jsxs)(l.Fragment,{children:[c&&null!=i&&(0,l.jsx)("span",{className:u().app_definition,children:i.order}),(0,l.jsx)("input",{className:u().app_input,name:"input-".concat(t,"-").concat(r),type:"text",value:e[t][r],onChange:j(t,r),maxLength:1,ref:b(t,r),onKeyDown:O(t,r),onKeyUp:R(t,r),autoComplete:"off"})]})},"".concat(t,"-").concat(r))},o)},t),t)})]}),s&&(0,l.jsxs)("div",{className:u().app_definitions,children:[x.length&&(0,l.jsxs)("div",{className:u().app_directionDefinitions,children:[(0,l.jsx)("h2",{children:"Orizzontali"}),(0,l.jsx)("ol",{children:x.map((e,n)=>(0,l.jsx)("li",{value:e.order,children:(0,l.jsx)("input",{className:u().app_definitionInput,name:"h-".concat(e.order),type:"text",value:e.horizontalDefinition,onChange:N(e,"h")})},"h-".concat(e.order,"-").concat(n)))})]}),w.length&&(0,l.jsxs)("div",{className:u().app_directionDefinitions,children:[(0,l.jsx)("h2",{children:"Verticali"}),(0,l.jsx)("ol",{children:w.map((e,n)=>(0,l.jsx)("li",{value:e.order,children:(0,l.jsx)("input",{className:u().app_definitionInput,name:"v-".concat(e.order),type:"text",value:e.verticalDefinition,onChange:N(e,"v")})},"v-".concat(e.order,"-").concat(n)))})]})]})]}),E=(0,l.jsx)("form",{onSubmit:D,children:(0,l.jsxs)("fieldset",{children:[(0,l.jsx)("legend",{children:"Opzioni"}),(0,l.jsx)("label",{htmlFor:"rows",children:"Numero di righe:"})," ",(0,l.jsx)("input",{name:"rows",defaultValue:t,ref:m,type:"number"})," ",(0,l.jsx)("label",{htmlFor:"cols",children:"Numero di colonne:"})," ",(0,l.jsx)("input",{name:"cols",defaultValue:o,ref:_,type:"number"})," ",(0,l.jsx)("button",{type:"submit",children:"Update"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"showDefs",name:"showDefs",checked:s,onChange:y,type:"checkbox",value:"showDefs"}),(0,l.jsx)("label",{htmlFor:"showDefs",children:"Mostra definizioni"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{id:"showNumbers",name:"showNumbers",checked:c,onChange:C,type:"checkbox",value:"showNumbers"}),(0,l.jsx)("label",{htmlFor:"showNumbers",children:"Mostra numeri"}),(0,l.jsx)("br",{}),(0,l.jsxs)("button",{onClick:k,type:"button",children:[(0,l.jsx)("em",{children:"Incroci obbligati"})," mode"]})," ",(0,l.jsxs)("button",{onClick:z,type:"button",children:[(0,l.jsx)("em",{children:"Ricerca di Parole Crociate"})," mode"]})]})});return(0,l.jsxs)("div",{children:[(0,l.jsx)(a,{}),(0,l.jsx)("div",{className:u().app_wrapper,children:I}),E]})}},2610:function(e){e.exports={app:"Cruciverba_app__iETEl",app_table:"Cruciverba_app_table__LBRQV",app_td:"Cruciverba_app_td__SuAPY",app_definition:"Cruciverba_app_definition__60Hbg",app_input:"Cruciverba_app_input__kFBhz",app_black:"Cruciverba_app_black__fLXRP",app_caption:"Cruciverba_app_caption__nHTrn",app_definitions:"Cruciverba_app_definitions___MNKj",app_directionDefinitions:"Cruciverba_app_directionDefinitions__FEFKz",app_definitionInput:"Cruciverba_app_definitionInput__3wXJf",app_wrapper:"Cruciverba_app_wrapper__QBtoh"}},1151:function(e,n,t){"use strict";t.d(n,{ah:function(){return i}});var l=t(7294);let r=l.createContext({});function i(e){let n=l.useContext(r);return l.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5992)}),_N_E=e.O()}]);