(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{5992:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cruciverba",function(){return i(140)}])},140:function(e,n,i){"use strict";i.r(n),i.d(n,{__N_SSG:function(){return f},default:function(){return _}});var t=i(5893),l=i(3940),r=i(7294),o=i(1151);function a(e){let n=Object.assign({p:"p"},(0,o.ah)(),e.components);return(0,t.jsx)(n.p,{children:"An implementation of the crosswords schema with automatic calculation of\ndefinitions number. Definitely not suitable for mobile devices, it will\nfrustrate you soooo much."})}var s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(a,e)})):a(e)},c=i(2610),u=i.n(c);let p=(e,n,i)=>{if(null==i[e][n])return!0;let t=0===e||null==i[e-1][n],l=0===n||null==i[e][n-1],r=e===i.length-1||null==i[e+1][n],o=n===i[e].length-1||null==i[e][n+1];return t&&l&&r&&o},d=e=>{let n=[];for(let i=0;i<e.length;i+=1)for(let t=0;t<e[i].length;t+=1)if(null!=e[i][t]){let l=0===i||null==e[i-1][t],r=0===t||null==e[i][t-1],o=i<e.length-1&&null!=e[i+1][t],a=t<e[i].length-1&&null!=e[i][t+1],s=l&&o,c=r&&a;(c||s)&&n.push({order:n.length+1,row:i,col:t,isHorizontal:c,isVertical:s,horizontalDefinition:"",verticalDefinition:""})}return n},h=e=>{let{rows:n,cols:i,showDefs:t=!0}=e,r=(0,l.DZ1)(()=>(0,l.rx1)("",i),n),o=d(r);return{matrix:r,definitions:o,rows:n,cols:i,showDefs:t}};var f=!0,_=function(){let[{matrix:e,definitions:n,rows:i,cols:o,showDefs:a},c]=(0,r.useReducer)((e,n)=>{switch(n.type){case"setValue":{let i=(0,l.d9v)(e.matrix);return i[n.row][n.col]=n.value,{...e,matrix:i}}case"toggleBlack":{let t=(0,l.d9v)(e.matrix);return t[n.row][n.col]=null==t[n.row][n.col]?"":null,{...e,matrix:t,definitions:d(t)}}case"setSize":{let r=h({rows:n.rows,cols:n.cols,showDefs:e.showDefs});for(let o=0;o<r.matrix.length;o+=1)for(let a=0;a<r.matrix[o].length;a+=1)o<e.matrix.length&&a<e.matrix[o].length&&(r.matrix[o][a]=e.matrix[o][a]);return r.definitions=d(r.matrix),r}case"setDefinition":return{...e,definitions:e.definitions.reduce((e,i)=>[...e,{...i,...i.row===n.row&&i.col===n.col&&{horizontalDefinition:n.horizontalDefinition,verticalDefinition:n.verticalDefinition}}],[])};case"setShowDefs":return{...e,showDefs:n.showDefs}}},{rows:12,cols:22,showDefs:!1},h),f=(0,r.useRef)(null),_=(0,r.useRef)(null),v=(0,r.useRef)((0,l.DZ1)(()=>(0,l.rx1)(null,o),i)),x=(e,n)=>i=>{e<v.current.length&&n<v.current[e].length&&(v.current[e][n]=i)},{h:m,v:w}=(0,r.useMemo)(()=>n.reduce((e,n)=>({...e,...n.isHorizontal&&{h:[...e.h,n]},...n.isVertical&&{v:[...e.v,n]}}),{h:[],v:[]}),[n]),g=(e,n)=>i=>{let t=i.target.value.toUpperCase();/^[A-Z]?$/.test(t)&&c({type:"setValue",row:e,col:n,value:t})},j=(e,n)=>()=>{c({type:"toggleBlack",row:e,col:n})},b=e=>{var n,i,t,r;e.preventDefault();let o=parseInt(null!==(t=null===(n=f.current)||void 0===n?void 0:n.value)&&void 0!==t?t:""),a=parseInt(null!==(r=null===(i=_.current)||void 0===i?void 0:i.value)&&void 0!==r?r:"");v.current=(0,l.DZ1)(()=>(0,l.rx1)(null,a),o),c({type:"setSize",rows:isNaN(o)||o<2?12:o,cols:isNaN(a)||a<2?22:a})},D=(e,n)=>i=>{c({type:"setDefinition",row:e.row,col:e.col,horizontalDefinition:"h"===n?i.target.value:e.horizontalDefinition,verticalDefinition:"v"===n?i.target.value:e.verticalDefinition})},N=e=>{c({type:"setShowDefs",showDefs:e.target.checked})},y=(n,i)=>t=>{var l,r,o,a,s,c;"ArrowUp"===t.key&&n>0&&(null===(r=v.current.reduceRight((e,t,l)=>null==e&&l<n&&null!=t[i]?t[i]:e,null))||void 0===r||r.focus()),"ArrowDown"===t.key&&n<e.length-1&&(null===(o=v.current.reduce((e,t,l)=>null==e&&l>n&&null!=t[i]?t[i]:e,null))||void 0===o||o.focus()),"ArrowLeft"===t.key&&i>0&&(null===(a=v.current[n].reduceRight((e,n,t)=>null==e&&t<i&&null!=n?n:e,null))||void 0===a||a.focus()),"ArrowRight"===t.key&&i<e[n].length-1&&(null===(s=v.current[n].reduce((e,n,t)=>null==e&&t>i&&null!=n?n:e,null))||void 0===s||s.focus()),"Backspace"===t.key&&0===(null===(l=v.current[n][i])||void 0===l?void 0:l.value).length&&i>0&&(null===(c=v.current[n].reduceRight((e,n,t)=>null==e&&t<i&&null!=n?n:e,null))||void 0===c||c.focus())},k=(n,i)=>t=>{if(/^[a-zA-Z]$/.test(t.key)&&i<e[n].length-1){var l;null===(l=v.current[n].reduce((e,n,t)=>null==e&&t>i&&null!=n?n:e,null))||void 0===l||l.focus()}},C=(0,t.jsxs)("div",{className:u().app,children:[(0,t.jsxs)("table",{className:u().app_table,children:[(0,t.jsx)("caption",{className:u().app_caption,children:"Parole Crociate"}),(0,t.jsx)("tbody",{children:(0,l.DZ1)(i=>(0,t.jsx)("tr",{children:(0,l.DZ1)(l=>{let r=n.find(e=>e.row===i&&e.col===l);return(0,t.jsx)("td",{className:u().app_td,onDoubleClick:j(i,l),children:p(i,l,e)?(0,t.jsx)("span",{className:u().app_black}):(0,t.jsxs)(t.Fragment,{children:[null!=r&&(0,t.jsx)("span",{className:u().app_definition,children:r.order}),(0,t.jsx)("input",{className:u().app_input,name:"input-".concat(i,"-").concat(l),type:"text",value:e[i][l],onChange:g(i,l),maxLength:1,ref:x(i,l),onKeyDown:y(i,l),onKeyUp:k(i,l),autoComplete:"off"})]})},"".concat(i,"-").concat(l))},o)},i),i)})]}),a&&(0,t.jsxs)("div",{className:u().app_definitions,children:[m.length&&(0,t.jsxs)("div",{className:u().app_directionDefinitions,children:[(0,t.jsx)("h2",{children:"Orizzontali"}),(0,t.jsx)("ol",{children:m.map((e,n)=>(0,t.jsx)("li",{value:e.order,children:(0,t.jsx)("input",{className:u().app_definitionInput,name:"h-".concat(e.order),type:"text",value:e.horizontalDefinition,onChange:D(e,"h")})},"h-".concat(e.order,"-").concat(n)))})]}),w.length&&(0,t.jsxs)("div",{className:u().app_directionDefinitions,children:[(0,t.jsx)("h2",{children:"Verticali"}),(0,t.jsx)("ol",{children:w.map((e,n)=>(0,t.jsx)("li",{value:e.order,children:(0,t.jsx)("input",{className:u().app_definitionInput,name:"v-".concat(e.order),type:"text",value:e.verticalDefinition,onChange:D(e,"v")})},"v-".concat(e.order,"-").concat(n)))})]})]})]}),z=(0,t.jsx)("form",{onSubmit:b,children:(0,t.jsxs)("fieldset",{children:[(0,t.jsx)("legend",{children:"Opzioni"}),(0,t.jsx)("label",{htmlFor:"rows",children:"Numero di righe:"})," ",(0,t.jsx)("input",{name:"rows",defaultValue:i,ref:f,type:"number"})," ",(0,t.jsx)("label",{htmlFor:"cols",children:"Numero di colonne:"})," ",(0,t.jsx)("input",{name:"cols",defaultValue:o,ref:_,type:"number"})," ",(0,t.jsx)("button",{type:"submit",children:"Update"}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{id:"showDefs",name:"showDefs",checked:a,onChange:N,type:"checkbox",value:"showDefs"}),(0,t.jsx)("label",{htmlFor:"showDefs",children:"Mostra definizioni"})]})});return(0,t.jsxs)("div",{children:[(0,t.jsx)(s,{}),(0,t.jsx)("div",{className:u().app_wrapper,children:C}),z]})}},2610:function(e){e.exports={app:"Cruciverba_app__iETEl",app_table:"Cruciverba_app_table__LBRQV",app_td:"Cruciverba_app_td__SuAPY",app_definition:"Cruciverba_app_definition__60Hbg",app_input:"Cruciverba_app_input__kFBhz",app_black:"Cruciverba_app_black__fLXRP",app_caption:"Cruciverba_app_caption__nHTrn",app_definitions:"Cruciverba_app_definitions___MNKj",app_directionDefinitions:"Cruciverba_app_directionDefinitions__FEFKz",app_definitionInput:"Cruciverba_app_definitionInput__3wXJf",app_wrapper:"Cruciverba_app_wrapper__QBtoh"}}},function(e){e.O(0,[407,774,888,179],function(){return e(e.s=5992)}),_N_E=e.O()}]);